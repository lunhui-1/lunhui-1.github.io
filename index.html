<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ä¸–ç•Œå…¨ç‰ˆæœ¬æŒ‡ä»¤è¾…åŠ© | è½®å›é“å°˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Noto+Sans+SC:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --mc-green: #5D8C3A;
            --mc-dark-green: #3D6E2E;
            --mc-light-green: #7EB356;
            --mc-orange: #d97706;
            --mc-red: #dc2626;
            --mc-blue: #2563eb;
            --mc-cyan: #06b6d4;
            --mc-gold: #fbbf24;
            --mc-purple: #9333ea;
            --sidebar-width: 280px;
            --bg-dark: #0a0f1c;
            --glass-bg: rgba(20, 25, 40, 0.95);
            --hover-bg: rgba(93, 140, 58, 0.15);
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Noto Sans SC', sans-serif; 
            background: var(--bg-dark); 
            color: #e2e8f0; 
            margin: 0; 
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .pixel-font { font-family: 'VT323', monospace; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }
        
        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars-bg { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -2;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
        }
        
        .particles { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -1; 
            overflow: hidden; 
            pointer-events: none; 
        }
        
        .particle { 
            position: absolute; 
            width: 2px; 
            height: 2px; 
            background: var(--mc-green); 
            border-radius: 50%; 
            opacity: 0.6; 
            animation: float-up linear infinite; 
            box-shadow: 0 0 10px var(--mc-green);
        }
        
        @keyframes float-up { 
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; } 
            10% { opacity: 0.8; } 
            90% { opacity: 0.8; } 
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; } 
        }
        
        /* ä¾§è¾¹æ  - ä¼˜åŒ–ç‰ˆ */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255,255,255,0.08);
            z-index: 100;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
            transition: transform 0.3s ease;
        }
        
        /* LogoåŒºåŸŸä¼˜åŒ– */
        .logo-area {
            padding: 24px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
            gap: 14px;
        }
        
        .logo-img {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            object-fit: cover;
            border: 2px solid transparent;
            background: linear-gradient(var(--bg-dark), var(--bg-dark)) padding-box,
                        linear-gradient(135deg, var(--mc-green), var(--mc-gold)) border-box;
            box-shadow: 0 0 15px rgba(93,140,58,0.3);
            animation: logo-glow 3s ease-in-out infinite;
        }
        
        @keyframes logo-glow {
            0%, 100% { box-shadow: 0 0 15px rgba(93,140,58,0.3); }
            50% { box-shadow: 0 0 25px rgba(93,140,58,0.5); }
        }
        
        .logo-text h1 {
            font-size: 1.15rem;
            font-weight: 700;
            background: linear-gradient(90deg, #fff, var(--mc-light-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
            line-height: 1.2;
        }
        
        .logo-text span {
            font-size: 0.75rem;
            color: #64748b;
        }
        
        /* å¯¼èˆªèœå•å±‚çº§ç»“æ„ */
        .nav-container {
            flex: 1;
            padding: 16px 12px;
        }
        
        .nav-section {
            margin-bottom: 8px;
        }
        
        /* ä¸€çº§èœå•æ ·å¼ */
        .nav-parent {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            color: #94a3b8;
            transition: all 0.2s;
            margin-bottom: 4px;
            font-weight: 500;
        }
        
        .nav-parent:hover {
            background: rgba(255,255,255,0.05);
            color: #fff;
        }
        
        .nav-parent.active {
            background: var(--hover-bg);
            color: var(--mc-light-green);
        }
        
        .nav-parent-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .nav-icon {
            width: 22px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .expand-icon {
            font-size: 0.8rem;
            transition: transform 0.3s;
        }
        
        .nav-parent.expanded .expand-icon {
            transform: rotate(180deg);
        }
        
        /* äºŒçº§èœå•å®¹å™¨ */
        .nav-children {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding-left: 12px;
        }
        
        .nav-parent.expanded + .nav-children {
            max-height: 500px;
        }
        
        /* äºŒçº§èœå•é¡¹ */
        .nav-child {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 16px 10px 44px;
            margin: 4px 0;
            border-radius: 8px;
            cursor: pointer;
            color: #94a3b8;
            font-size: 0.9rem;
            transition: all 0.2s;
            position: relative;
        }
        
        .nav-child::before {
            content: '';
            position: absolute;
            left: 28px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 4px;
            background: currentColor;
            border-radius: 50%;
            opacity: 0.5;
        }
        
        .nav-child:hover {
            background: rgba(255,255,255,0.05);
            color: #fff;
        }
        
        .nav-child.active {
            background: rgba(93,140,58,0.2);
            color: var(--mc-light-green);
        }
        
        .nav-child.active::before {
            background: var(--mc-light-green);
            opacity: 1;
        }
        
        .nav-badge {
            background: rgba(93,140,58,0.2);
            color: var(--mc-light-green);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* åˆ†éš”æ ‡é¢˜ */
        .nav-divider {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #64748b;
            padding: 16px 16px 8px;
            font-weight: 600;
        }
        
        /* åº•éƒ¨ç»Ÿè®¡ */
        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .stat-box {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
        }
        
        .stat-value {
            font-family: 'VT323', monospace;
            font-size: 1.8rem;
            color: var(--mc-light-green);
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: #64748b;
            margin-top: 4px;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            padding: 32px;
            transition: margin-left 0.3s;
        }
        
        /* é¡µé¢æ ‡é¢˜ */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        
        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, #fff, var(--mc-light-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* ä¸Šä¼ åŒºåŸŸ */
        .upload-card {
            background: linear-gradient(135deg, rgba(30,41,59,0.6), rgba(15,23,42,0.6));
            border: 2px dashed rgba(93,140,58,0.3);
            border-radius: 20px;
            padding: 48px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 32px;
        }
        
        .upload-card:hover {
            border-color: var(--mc-green);
            background: rgba(93,140,58,0.05);
            transform: translateY(-2px);
        }
        
        /* æœç´¢æ¡† */
        .search-box {
            position: relative;
            margin-bottom: 24px;
        }
        
        .search-input {
            width: 100%;
            padding: 14px 20px;
            background: rgba(30,41,59,0.6);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            color: #fff;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--mc-green);
            box-shadow: 0 0 0 3px rgba(93,140,58,0.1);
        }
        
        /* ç­›é€‰æ ‡ç­¾ */
        .filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 24px;
        }
        
        .chip {
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #cbd5e1;
        }
        
        .chip:hover {
            background: rgba(93,140,58,0.1);
            border-color: rgba(93,140,58,0.3);
        }
        
        .chip.active {
            background: linear-gradient(135deg, var(--mc-green), var(--mc-dark-green));
            border-color: transparent;
            color: #fff;
        }
        
        /* å†…å®¹å¡ç‰‡ç½‘æ ¼ */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 20px;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: linear-gradient(135deg, rgba(30,41,59,0.8), rgba(15,23,42,0.9));
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--mc-green), var(--mc-gold));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .card:hover {
            transform: translateY(-4px);
            border-color: rgba(93,140,58,0.4);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        
        .card:hover::before {
            opacity: 1;
        }
        
        .card-cmd { border-top: 3px solid var(--mc-green); }
        .card-block { border-top: 3px solid var(--mc-orange); }
        .card-redstone { border-top: 3px solid var(--mc-red); }
        .card-item { border-top: 3px solid var(--mc-blue); }
        .card-adv { border-top: 3px solid var(--mc-cyan); }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }
        
        .card-title {
            font-family: 'VT323', monospace;
            font-size: 1.6rem;
            color: #fff;
            margin: 0;
            line-height: 1.2;
        }
        
        .card-version {
            font-size: 0.75rem;
            color: #64748b;
            background: rgba(0,0,0,0.3);
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .card-desc {
            color: #94a3b8;
            font-size: 0.9rem;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 12px;
        }
        
        .card-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .tag {
            padding: 4px 10px;
            background: rgba(93,140,58,0.2);
            color: var(--mc-light-green);
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .tag-red { background: rgba(220,38,38,0.2); color: #fca5a5; }
        .tag-blue { background: rgba(37,99,235,0.2); color: #60a5fa; }
        .tag-cyan { background: rgba(6,182,212,0.2); color: #22d3ee; }
        .tag-orange { background: rgba(217,119,6,0.2); color: #fbbf24; }
        .tag-purple { background: rgba(147,51,234,0.2); color: #c084fc; }
        
        /* IDå— */
        .id-block {
            background: rgba(0,0,0,0.4);
            padding: 10px 14px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--mc-gold);
            border: 1px solid rgba(251,191,36,0.3);
            margin-top: 12px;
            cursor: pointer;
            transition: all 0.2s;
            word-break: break-all;
        }
        
        .id-block:hover {
            border-color: var(--mc-gold);
            background: rgba(251,191,36,0.1);
        }
        
        /* ç‰ˆæœ¬èŒƒå›´æ ‡ç­¾ */
        .version-range {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 8px;
        }
        
        .version-range i {
            color: var(--mc-green);
        }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 80px 20px;
            color: #64748b;
            background: rgba(30,41,59,0.3);
            border-radius: 16px;
            border: 2px dashed rgba(255,255,255,0.1);
        }
        
        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px);
            z-index: 200;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-content {
            background: linear-gradient(135deg, rgba(30,41,59,0.98), rgba(15,23,42,0.98));
            border: 1px solid rgba(93,140,58,0.3);
            border-radius: 24px;
            max-width: 800px;
            margin: 40px auto;
            padding: 32px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: none;
            color: #94a3b8;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .modal-close:hover {
            background: rgba(220,38,38,0.2);
            color: #fff;
            transform: rotate(90deg);
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, var(--mc-green), var(--mc-dark-green));
            color: #fff;
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: 500;
            z-index: 3000;
            opacity: 0;
            transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* ç§»åŠ¨ç«¯èœå•æŒ‰é’® */
        .mobile-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 99;
            width: 44px;
            height: 44px;
            background: var(--glass-bg);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }
        
        /* é®ç½© */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 90;
            backdrop-filter: blur(4px);
        }
        
        /* å“åº”å¼ */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 80px 20px 20px;
            }
            
            .mobile-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .overlay.show {
                display: block;
            }
        }
        
        @media (max-width: 640px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
        
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--mc-green);
            border-radius: 3px;
        }
        
        /* åˆ†ç±»æ ‡ç­¾ç‰¹æ®Šæ ·å¼ */
        .category-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 6px;
        }
        
        .cat-main { background: rgba(234,179,8,0.2); color: #facc15; }
        .cat-nether { background: rgba(220,38,38,0.2); color: #f87171; }
        .cat-end { background: rgba(147,51,234,0.2); color: #c084fc; }
        .cat-adventure { background: rgba(6,182,212,0.2); color: #22d3ee; }
        .cat-husbandry { background: rgba(34,197,94,0.2); color: #4ade80; }
    </style>
</head>
<body>
    <div class="stars-bg"></div>
    <div class="particles" id="particles"></div>
    
    <button class="mobile-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
    
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar" id="sidebar">
        <!-- LogoåŒºåŸŸ -->
        <div class="logo-area">
            <img src="image.png" alt="Logo" class="logo-img" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%235D8C3A%22 width=%22100%22 height=%22100%22 rx=%2210%22/%3E%3Ctext x=%2250%22 y=%2265%22 font-size=%2250%22 text-anchor=%22middle%22 fill=%22white%22%3EMC%3C/text%3E%3C/svg%3E'">
            <div class="logo-text">
                <h1>MCæŒ‡ä»¤è¾…åŠ©</h1>
                <span>v 1.15.0 Pro</span></p>
                <span>è½®å›é“å°˜ç²¾å¿ƒåˆ¶ä½œ|å¤šç‰ˆæœ¬è¾…åŠ©</span></p>
                <span>https://qm.qq.com/q/EhczsbIroQ</span>
            </div>
        </div>
        
        <!-- å¯¼èˆªèœå• -->
        <nav class="nav-container">
            <!-- æ•°æ®åˆ†ç±»ç»„ -->
            <div class="nav-divider">æ•°æ®åˆ†ç±»</div>
            
            <!-- ä¸»é¡µï¼ˆå¯å±•å¼€ä¸€çº§èœå•ï¼‰ -->
            <div class="nav-section">
                <div class="nav-parent expanded" onclick="toggleMenu(this)" data-menu="home">
                    <div class="nav-parent-left">
                        <span class="nav-icon"><i class="fas fa-home"></i></span>
                        <span>ä¸»é¡µ</span>
                    </div>
                    <i class="fas fa-chevron-down expand-icon"></i>
                </div>
                
                <!-- äºŒçº§èœå• -->
                <div class="nav-children" style="max-height: 500px;">
                    <div class="nav-child active" onclick="switchTab('commands', this)">
                        <span>æŒ‡ä»¤å¤§å…¨</span>
                        <span class="nav-badge" id="badge-cmd">0</span>
                    </div>
                    <div class="nav-child" onclick="switchTab('blocks', this)">
                        <span>å‘½ä»¤æ–¹å—</span>
                        <span class="nav-badge" id="badge-block">0</span>
                    </div>
                    <div class="nav-child" onclick="switchTab('redstone', this)">
                        <span>çº¢çŸ³å…ƒä»¶</span>
                        <span class="nav-badge" id="badge-redstone">0</span>
                    </div>
                    <div class="nav-child" onclick="switchTab('items', this)">
                        <span>ç‰©å“ID</span>
                        <span class="nav-badge" id="badge-item">0</span>
                    </div>
                    <div class="nav-child" onclick="switchTab('advancements', this)">
                        <span>å‡†åˆ™ID</span>
                        <span class="nav-badge" id="badge-adv">0</span>
                    </div>
                </div>
            </div>
            
            <!-- æ“ä½œç»„ -->
            <div class="nav-divider">æ“ä½œ</div>
            
            <div class="nav-parent" onclick="selectFiles()">
                <div class="nav-parent-left">
                    <span class="nav-icon"><i class="fas fa-upload"></i></span>
                    <span>å¯¼å…¥æ•°æ®</span>
                </div>
            </div>
            
            <div class="nav-parent" onclick="clearAllData()">
                <div class="nav-parent-left">
                    <span class="nav-icon"><i class="fas fa-trash-alt"></i></span>
                    <span>æ¸…ç©ºæ•°æ®</span>
                </div>
            </div>
        </nav>
        
        <!-- åº•éƒ¨ç»Ÿè®¡ -->
        <div class="sidebar-footer">
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value" id="stat-total">0</div>
                    <div class="stat-label">æ€»æ•°æ®</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="stat-cmd">0</div>
                    <div class="stat-label">æŒ‡ä»¤</div>
                </div>
            </div>
        </div>
    </aside>
    
    <!-- ä¸»å†…å®¹ -->
    <main class="main-content">
        <div class="page-header">
            <h2 class="page-title" id="page-title">æŒ‡ä»¤å¤§å…¨</h2>
            <div style="display: flex; gap: 12px;">
                <button onclick="selectFiles()" style="padding: 10px 20px; background: rgba(93,140,58,0.2); border: 1px solid rgba(93,140,58,0.4); color: var(--mc-light-green); border-radius: 10px; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                    <i class="fas fa-folder-open mr-2"></i>å¯¼å…¥
                </button>
                <button onclick="clearAllData()" style="padding: 10px 20px; background: rgba(220,38,38,0.1); border: 1px solid rgba(220,38,38,0.3); color: #fca5a5; border-radius: 10px; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                    <i class="fas fa-eraser mr-2"></i>æ¸…ç©º
                </button>
            </div>
        </div>
        
        <!-- ä¸Šä¼ åŒº -->
        <div class="upload-card" id="dropZone" onclick="selectFiles()">
            <div style="font-size: 3rem; margin-bottom: 16px;">ğŸ“¦</div>
            <h3 style="font-size: 1.25rem; margin-bottom: 8px; font-weight: 600;">æ‹–æ‹½æ–‡ä»¶æˆ–ZIPåˆ°æ­¤å¤„</h3>
            <p style="color: #64748b; font-size: 0.9rem;">æ”¯æŒ .txt æˆ–åŒ…å«å¤šä¸ªtxtçš„ .zip æ–‡ä»¶</p>
            <input type="file" id="fileInput" multiple accept=".txt,.zip" style="display: none;">
        </div>
        
        <!-- æœç´¢ -->
        <div class="search-box">
            <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢..." oninput="handleSearch()">
        </div>
        
        <!-- ç­›é€‰å™¨ -->
        <div class="filter-chips" id="filters">
            <div class="chip active" onclick="setFilter('all')">å…¨éƒ¨</div>
        </div>
        
        <!-- å†…å®¹ -->
        <div id="mainContent" class="content-grid">
            <div class="empty-state">
                <div style="font-size: 4rem; margin-bottom: 16px; opacity: 0.5;">ğŸ“­</div>
                <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 8px; color: #94a3b8;">æš‚æ— æ•°æ®</div>
                <div style="font-size: 0.9rem; color: #64748b;">è¯·ä¸Šä¼ æ–‡ä»¶å¼€å§‹ä½¿ç”¨</div>
            </div>
        </div>
    </main>
    
    <!-- æ¨¡æ€æ¡† -->
    <div class="modal" id="modal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-body"></div>
        </div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
    // æ•°æ®å­˜å‚¨ - ä½¿ç”¨localStorageæŒä¹…åŒ–
    const STORAGE_KEY = 'mc_command_helper_data';
    
    const data = {
        commands: new Map(),
        blocks: [],
        redstone: [],
        items: [],
        advancements: []
    };
    
    let currentTab = 'commands';
    let currentFilter = 'all';
    let processedFiles = new Set();
    
    const tabNames = {
        commands: 'æŒ‡ä»¤å¤§å…¨',
        blocks: 'å‘½ä»¤æ–¹å—',
        redstone: 'çº¢çŸ³å…ƒä»¶',
        items: 'ç‰©å“ID',
        advancements: 'å‡†åˆ™ID'
    };
    
    // ç‰ˆæœ¬æ˜ å°„è¡¨
    const versionMap = {
        'java': 'Javaç‰ˆ',
        'bedrock': 'åŸºå²©ç‰ˆ',
        'education': 'æ•™è‚²ç‰ˆ',
        'edu': 'æ•™è‚²ç‰ˆ',
        'netease': 'ç½‘æ˜“ç‰ˆ'
    };
    
    // åˆ†ç±»æ˜ å°„ï¼ˆç”¨äºå‡†åˆ™IDï¼‰
    const categoryMap = {
        'ä¸»çº¿æ•…äº‹': 'ä¸»çº¿æ•…äº‹',
        'ä¸‹ç•Œ': 'ä¸‹ç•Œ',
        'ä¸‹ç•Œå‡†åˆ™': 'ä¸‹ç•Œ',
        'æœ«åœ°': 'æœ«åœ°',
        'æœ«åœ°å‡†åˆ™': 'æœ«åœ°',
        'å†’é™©': 'å†’é™©',
        'å†’é™©å‡†åˆ™': 'å†’é™©',
        'å†œç‰§ä¸š': 'å†œç‰§ä¸š',
        'å†œç‰§ä¸šå‡†åˆ™': 'å†œç‰§ä¸š'
    };
    
    // åˆå§‹åŒ–
    window.onload = function() {
        initParticles();
        loadFromStorage();
    };
    
    // ä»localStorageåŠ è½½æ•°æ®
    function loadFromStorage() {
        try {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const parsed = JSON.parse(saved);
                if (parsed.commands) {
                    parsed.commands.forEach(([key, value]) => {
                        data.commands.set(key, value);
                    });
                }
                if (parsed.blocks) data.blocks = parsed.blocks;
                if (parsed.redstone) data.redstone = parsed.redstone;
                if (parsed.items) data.items = parsed.items;
                if (parsed.advancements) data.advancements = parsed.advancements;
                if (parsed.processedFiles) processedFiles = new Set(parsed.processedFiles);
                
                updateStats();
                updateFilters();
                renderContent();
                showToast('âœ“ å·²æ¢å¤ä¸Šæ¬¡çš„æ•°æ®');
            }
        } catch (e) {
            console.error('åŠ è½½æ•°æ®å¤±è´¥:', e);
        }
    }
    
    // ä¿å­˜åˆ°localStorage
    function saveToStorage() {
        try {
            const saveData = {
                commands: Array.from(data.commands.entries()),
                blocks: data.blocks,
                redstone: data.redstone,
                items: data.items,
                advancements: data.advancements,
                processedFiles: Array.from(processedFiles)
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(saveData));
        } catch (e) {
            console.error('ä¿å­˜æ•°æ®å¤±è´¥:', e);
        }
    }
    
    function initParticles() {
        const container = document.getElementById('particles');
        for(let i = 0; i < 40; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + '%';
            p.style.animationDelay = Math.random() * 15 + 's';
            p.style.animationDuration = (10 + Math.random() * 20) + 's';
            container.appendChild(p);
        }
    }
    
    // ä¾§è¾¹æ æ§åˆ¶
    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('open');
        document.getElementById('overlay').classList.toggle('show');
    }
    
    // èœå•å±•å¼€/æŠ˜å 
    function toggleMenu(element) {
        element.classList.toggle('expanded');
        const children = element.nextElementSibling;
        if(element.classList.contains('expanded')) {
            children.style.maxHeight = '500px';
        } else {
            children.style.maxHeight = '0';
        }
    }
    
    // åˆ‡æ¢Tab
    function switchTab(tab, element) {
        currentTab = tab;
        currentFilter = 'all';
        
        // æ›´æ–°äºŒçº§èœå•æ¿€æ´»çŠ¶æ€
        document.querySelectorAll('.nav-child').forEach(el => el.classList.remove('active'));
        if(element) element.classList.add('active');
        
        // æ›´æ–°é¡µé¢æ ‡é¢˜
        document.getElementById('page-title').textContent = tabNames[tab];
        
        // ç§»åŠ¨ç«¯å…³é—­ä¾§è¾¹æ 
        if(window.innerWidth <= 1024) {
            toggleSidebar();
        }
        
        // é‡ç½®æœç´¢
        document.getElementById('searchInput').value = '';
        
        // æ›´æ–°ç­›é€‰å™¨
        updateFilters();
        
        // æ¸²æŸ“
        renderContent();
    }
    
    // æ–‡æœ¬æ¸…ç† - åŠ å¼ºç‰ˆ
    function cleanText(text) {
        if(!text) return '';
        return text
            .replace(/ã€|ã€‘/g, '')
            .replace(/\[/g, '')
            .replace(/\]/g, '')
            .replace(/[ï¼ˆ(].*?[)ï¼‰]/g, '') // å»é™¤æ‹¬å·å†…å®¹
            .replace(/^\s*[-â€“â€”]\s*/g, '') // å»é™¤å¼€å¤´çš„æ¨ªçº¿
            .trim();
    }
    
    // æå–ç‰ˆæœ¬èŒƒå›´
    function extractVersionRange(text) {
        if(!text) return null;
        const patterns = [
            /(\d+\.\d+(?:\.\d+)?)\s*[-~]\s*(\d+\.\d+(?:\.\d+)?)/,  // 1.12-1.21 æˆ– 1.12~1.21
            /(\d+\.\d+(?:\.\d+)?)\s*\+/,  // 1.12+
            /(?:Java|BE|Edu|ç½‘æ˜“ç‰ˆ)\s*(\d+\.\d+(?:\.\d+)?)/i  // Java 1.12
        ];
        
        for(let pattern of patterns) {
            const match = text.match(pattern);
            if(match) {
                if(match[2]) {
                    return { min: match[1], max: match[2] };
                } else {
                    return { min: match[1], max: '+' };
                }
            }
        }
        return null;
    }
    
    // è§£æå‡½æ•°
    function parseItems(text) {
        const items = [];
        const entries = text.split(/(?=ã€)/);
        for(const entry of entries) {
            if(!entry.includes('ã€')) continue;
            const lines = entry.trim().split('\n');
            let item = {};
            for(const line of lines) {
                if(line.includes('ã€') && line.includes('ã€‘')) item.name = cleanText(line);
                else if(line.includes('ID')) item.id = cleanText(line.split(/[ï¼š:]/)[1] || '');
                else if(line.includes('åˆ†ç±»')) item.category = cleanText(line.split(/[ï¼š:]/)[1] || '');
                else if(line.includes('ç®€ä»‹')) item.desc = cleanText(line.split(/[ï¼š:]/)[1] || '');
            }
            if(item.name) items.push(item);
        }
        return items;
    }
    
    function parseCommands(text, source) {
        const lines = text.split('\n');
        let current = null;
        const versionRange = { min: '', max: '' };
        
        for(let i = 0; i < lines.length; i++) {
            const line = lines[i];
            const trimmed = line.trim();
            if(!trimmed || trimmed.startsWith('â€”')) continue;
            
            // æ£€æµ‹æŒ‡ä»¤åï¼ˆä»¥/å¼€å¤´ï¼‰
            if(trimmed.startsWith('/') && !trimmed.includes('ï¼š') && !line.includes(':')) {
                if(current && current.name) {
                    // å»é‡æ£€æŸ¥
                    const key = `${current.name}_${source}`;
                    if(!data.commands.has(key)) {
                        data.commands.set(key, current);
                    }
                }
                current = {
                    name: cleanText(trimmed.split(/\s+/)[0]),
                    desc: '',
                    syntax: cleanText(trimmed),
                    usage: '',
                    source: source,
                    versionRange: { min: '', max: '' },
                    examples: []
                };
            } else if(current) {
                if(trimmed.startsWith('ç®€ä»‹')) current.desc = cleanText(trimmed.substring(3));
                else if(trimmed.startsWith('è¯­æ³•')) current.syntax = cleanText(trimmed.substring(3));
                else if(trimmed.startsWith('ç”¨é€”')) current.usage = cleanText(trimmed.substring(3));
                else if(trimmed.startsWith('é€‚ç”¨ç‰ˆæœ¬')) {
                    const verText = trimmed.substring(5);
                    const range = extractVersionRange(verText);
                    if(range) current.versionRange = range;
                }
                else if(trimmed.startsWith('>')) current.examples.push(cleanText(trimmed.substring(1)));
            }
        }
        if(current && current.name) {
            const key = `${current.name}_${source}`;
            if(!data.commands.has(key)) {
                data.commands.set(key, current);
            }
        }
    }
    
    function parseBlocks(text) {
        const blocks = [];
        const entries = text.split(/(?=ã€)/);
        for(const entry of entries) {
            if(!entry.includes('ã€')) continue;
            const lines = entry.trim().split('\n');
            let block = { obtains: [], ui: [], tips: [], type: '' };
            for(const line of lines) {
                if(line.includes('ã€') && line.includes('ã€‘')) block.name = cleanText(line);
                else if(line.includes('ç±»å‹')) block.type = cleanText(line.split(/[ï¼š:]/)[1] || '');
                else if(line.includes('åŠŸèƒ½')) block.desc = cleanText(line.split(/[ï¼š:]/)[1] || '');
                else if(line.includes('æŠ€å·§')) block.tips.push(cleanText(line.split(/[ï¼š:]/)[1] || ''));
            }
            if(block.name) blocks.push(block);
        }
        return blocks;
    }
    
    function parseRedstone(text) {
        const items = [];
        const entries = text.split(/(?=ã€)/);
        for(const entry of entries) {
            if(!entry.includes('ã€')) continue;
            const lines = entry.trim().split('\n');
            let item = { features: [], type: '' };
            for(const line of lines) {
                if(line.includes('ã€') && line.includes('ã€‘')) item.name = cleanText(line);
                else if(line.includes('ç±»å‹')) item.type = cleanText(line.split(/[ï¼š:]/)[1] || '');
                else if(line.includes('åŠŸèƒ½')) item.desc = cleanText(line.split(/[ï¼š:]/)[1] || '');
                else if(line.includes('ç‰¹æ€§')) item.features.push(cleanText(line.split(/[ï¼š:]/)[1] || ''));
            }
            if(item.name) items.push(item);
        }
        return items;
    }
    
    function parseAdvancements(text) {
        const advs = [];
        const lines = text.split('\n');
        let current = null;
        
        for(const line of lines) {
            const trimmed = line.trim();
            if(trimmed.startsWith('ã€') && trimmed.includes('ã€‘')) {
                if(current && current.id) advs.push(current);
                current = { name: cleanText(trimmed), category: '', id: '', desc: '', condition: '' };
            } else if(current && trimmed.includes('ID')) {
                current.id = cleanText(trimmed.split(/[ï¼š:]/)[1] || '');
            } else if(current && trimmed.includes('åˆ†ç±»')) {
                const cat = cleanText(trimmed.split(/[ï¼š:]/)[1] || '');
                current.category = categoryMap[cat] || cat;
            } else if(current && trimmed.includes('ç®€ä»‹')) {
                current.desc = cleanText(trimmed.split(/[ï¼š:]/)[1] || '');
            } else if(current && trimmed.includes('æ¡ä»¶')) {
                current.condition = cleanText(trimmed.split(/[ï¼š:]/)[1] || '');
            } else if(current && trimmed.includes('ç‰ˆæœ¬')) {
                const verText = trimmed.split(/[ï¼š:]/)[1] || '';
                const range = extractVersionRange(verText);
                if(range) current.versionRange = range;
            }
        }
        if(current && current.id) advs.push(current);
        return advs;
    }
    
    // æ–‡ä»¶å¤„ç†
    document.getElementById('fileInput').addEventListener('change', async function(e) {
        const files = Array.from(e.target.files);
        if(files.length === 0) return;
        
        let newCount = 0;
        for(const file of files) {
            const fid = `${file.name}_${file.size}`;
            if(processedFiles.has(fid)) continue;
            processedFiles.add(fid);
            newCount++;
            
            try {
                if(file.name.endsWith('.zip')) {
                    const zip = await JSZip.loadAsync(file);
                    for(const [name, zipFile] of Object.entries(zip.files)) {
                        if(name.endsWith('.txt')) {
                            const content = await zipFile.async('text');
                            processContent(content, name);
                        }
                    }
                } else {
                    const text = await file.text();
                    processContent(text, file.name);
                }
            } catch(err) {
                console.error(err);
            }
        }
        
        if(newCount > 0) {
            saveToStorage(); // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            showToast(`âœ“ æˆåŠŸå¯¼å…¥ ${newCount} ä¸ªæ–‡ä»¶`);
            updateStats();
            updateFilters();
            renderContent();
        }
        
        e.target.value = '';
    });
    
    function processContent(text, filename) {
        const lower = filename.toLowerCase();
        if(lower.includes('item')) data.items.push(...parseItems(text));
        else if(lower.includes('redstone')) data.redstone.push(...parseRedstone(text));
        else if(lower.includes('block')) data.blocks.push(...parseBlocks(text));
        else if(lower.includes('advancement')) data.advancements.push(...parseAdvancements(text));
        else {
            let source = 'unknown';
            if(lower.includes('java')) source = 'java';
            else if(lower.includes('bedrock')) source = 'bedrock';
            else if(lower.includes('edu')) source = 'education';
            else if(lower.includes('netease')) source = 'netease';
            parseCommands(text, source);
        }
    }
    
    function selectFiles() {
        document.getElementById('fileInput').click();
    }
    
    function clearAllData() {
        if(!confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚')) return;
        
        data.commands.clear();
        data.blocks = [];
        data.redstone = [];
        data.items = [];
        data.advancements = [];
        processedFiles.clear();
        localStorage.removeItem(STORAGE_KEY);
        
        updateStats();
        updateFilters();
        renderContent();
        showToast('âœ“ å·²æ¸…ç©ºæ‰€æœ‰æ•°æ®');
    }
    
    // æ¸²æŸ“
    function renderContent() {
        const keyword = document.getElementById('searchInput').value.toLowerCase();
        const container = document.getElementById('mainContent');
        let html = '';
        
        switch(currentTab) {
            case 'commands':
                const cmds = Array.from(data.commands.values()).filter(c => {
                    if(currentFilter !== 'all' && c.source !== currentFilter) return false;
                    return !keyword || c.name.includes(keyword) || c.desc.toLowerCase().includes(keyword);
                });
                html = cmds.map(c => {
                    const versionText = c.versionRange.min ? 
                        `${c.versionRange.min}${c.versionRange.max === '+' ? '+' : '~' + c.versionRange.max}` : '';
                    return `
                    <div class="card card-cmd" onclick="showDetail('cmd', '${c.name}', '${c.source}')">
                        <div class="card-header">
                            <div>
                                <div class="card-title" style="color: var(--mc-green);">${c.name}</div>
                                ${versionText ? `<div class="version-range"><i class="fas fa-code-branch"></i> ${versionText}</div>` : ''}
                            </div>
                            <span class="tag">${versionMap[c.source] || c.source}</span>
                        </div>
                        <div class="card-desc">${c.desc || 'æš‚æ— ç®€ä»‹'}</div>
                    </div>
                `}).join('');
                break;
                
            case 'blocks':
                const blocks = data.blocks.filter(b => {
                    if(currentFilter !== 'all' && !b.type.includes(currentFilter)) return false;
                    return !keyword || b.name.toLowerCase().includes(keyword);
                });
                html = blocks.map(b => `
                    <div class="card card-block" onclick="showDetail('block', '${b.name}')">
                        <div style="margin-bottom: 8px;">
                            <span class="tag tag-orange">${b.type || 'æ–¹å—'}</span>
                        </div>
                        <div class="card-title" style="color: var(--mc-orange);">${b.name}</div>
                        <div class="card-desc">${b.desc || ''}</div>
                    </div>
                `).join('');
                break;
                
            case 'redstone':
                const reds = data.redstone.filter(r => {
                    if(currentFilter !== 'all') {
                        // æ”¯æŒç±»å‹è¿‡æ»¤
                        return r.type && r.type.includes(currentFilter);
                    }
                    return !keyword || r.name.toLowerCase().includes(keyword);
                });
                html = reds.map(r => `
                    <div class="card card-redstone" onclick="showDetail('redstone', '${r.name}')">
                        ${r.type ? `<div style="margin-bottom: 8px;"><span class="tag tag-red">${r.type}</span></div>` : ''}
                        <div class="card-title" style="color: var(--mc-red);">${r.name}</div>
                        <div class="card-desc">${r.desc || ''}</div>
                    </div>
                `).join('');
                break;
                
            case 'items':
                const items = data.items.filter(i => {
                    if(currentFilter !== 'all' && i.category !== currentFilter) return false;
                    return !keyword || i.name.toLowerCase().includes(keyword) || i.id.toLowerCase().includes(keyword);
                });
                html = items.map(i => `
                    <div class="card card-item">
                        <div style="margin-bottom: 8px;">
                            <span class="tag tag-blue">${i.category || 'ç‰©å“'}</span>
                        </div>
                        <div class="card-title" style="color: #60a5fa;">${i.name}</div>
                        <div class="id-block" onclick="event.stopPropagation(); copyText('${i.id}')">${i.id}</div>
                        <div class="card-desc" style="margin-top: 8px;">${i.desc || ''}</div>
                    </div>
                `).join('');
                break;
                
            case 'advancements':
                const advs = data.advancements.filter(a => {
                    if(currentFilter !== 'all' && a.category !== currentFilter) return false;
                    return !keyword || a.id.toLowerCase().includes(keyword) || a.name.toLowerCase().includes(keyword);
                });
                html = advs.map(a => {
                    let catClass = 'cat-main';
                    if(a.category.includes('ä¸‹ç•Œ')) catClass = 'cat-nether';
                    else if(a.category.includes('æœ«åœ°')) catClass = 'cat-end';
                    else if(a.category.includes('å†’é™©')) catClass = 'cat-adventure';
                    else if(a.category.includes('å†œç‰§')) catClass = 'cat-husbandry';
                    
                    return `
                    <div class="card card-adv" onclick="showDetail('adv', '${a.id}')">
                        <div class="card-header">
                            <div>
                                <span class="category-tag ${catClass}">${a.category || 'å‡†åˆ™'}</span>
                                <div class="card-title" style="color: var(--mc-cyan); margin-top: 4px;">${a.name}</div>
                            </div>
                        </div>
                        <div class="id-block" onclick="event.stopPropagation(); copyText('${a.id}')">${a.id}</div>
                        <div class="card-desc" style="margin-top: 8px;">${a.desc || ''}</div>
                        ${a.condition ? `<div style="margin-top: 8px; font-size: 0.8rem; color: #64748b;"><i class="fas fa-check-circle" style="color: var(--mc-green);"></i> ${a.condition}</div>` : ''}
                    </div>
                `}).join('');
                break;
        }
        
        if(html === '') {
            html = `
                <div class="empty-state">
                    <div style="font-size: 4rem; margin-bottom: 16px;">ğŸ”</div>
                    <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 8px;">æœªæ‰¾åˆ°æ•°æ®</div>
                    <div style="font-size: 0.9rem; color: #64748b;">è¯·ä¸Šä¼ æ–‡ä»¶æˆ–æ›´æ”¹æœç´¢æ¡ä»¶</div>
                </div>
            `;
        }
        
        container.innerHTML = html;
    }
    
    function updateFilters() {
        const container = document.getElementById('filters');
        let html = '<div class="chip active" onclick="setFilter(\'all\')">å…¨éƒ¨</div>';
        
        if(currentTab === 'commands') {
            const versions = {};
            data.commands.forEach(c => {
                versions[c.source] = (versions[c.source] || 0) + 1;
            });
            Object.entries(versions).forEach(([v, n]) => {
                if(v !== 'unknown') {
                    const label = versionMap[v] || v;
                    html += `<div class="chip" onclick="setFilter('${v}')">${label} (${n})</div>`;
                }
            });
        } else if(currentTab === 'blocks') {
            html += `<div class="chip" onclick="setFilter('è„‰å†²å‹')">è„‰å†²å‹</div>`;
            html += `<div class="chip" onclick="setFilter('å¾ªç¯å‹')">å¾ªç¯å‹</div>`;
            html += `<div class="chip" onclick="setFilter('è¿é”å‹')">è¿é”å‹</div>`;
        } else if(currentTab === 'redstone') {
            // ä»æ•°æ®ä¸­æå–æ‰€æœ‰ç±»å‹
            const types = new Set();
            data.redstone.forEach(r => {
                if(r.type) {
                    // åˆ†å‰²"ç”µæºå…ƒä»¶ / çº¢çŸ³ç”µæº"è¿™æ ·çš„æ ¼å¼
                    r.type.split(/[\/,]/).forEach(t => {
                        types.add(t.trim());
                    });
                }
            });
            types.forEach(t => {
                if(t) html += `<div class="chip" onclick="setFilter('${t}')">${t}</div>`;
            });
        } else if(currentTab === 'items') {
            const cats = {};
            data.items.forEach(i => { 
                if(i.category) cats[i.category] = (cats[i.category] || 0) + 1; 
            });
            Object.entries(cats).forEach(([c, n]) => {
                html += `<div class="chip" onclick="setFilter('${c}')">${c} (${n})</div>`;
            });
        } else if(currentTab === 'advancements') {
            const cats = {};
            data.advancements.forEach(a => { 
                if(a.category) cats[a.category] = (cats[a.category] || 0) + 1; 
            });
            Object.entries(cats).forEach(([c, n]) => {
                html += `<div class="chip" onclick="setFilter('${c}')">${c} (${n})</div>`;
            });
        }
        
        container.innerHTML = html;
    }
    
    function setFilter(filter) {
        currentFilter = filter;
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        event.target.classList.add('active');
        renderContent();
    }
    
    function handleSearch() {
        renderContent();
    }
    
    function showDetail(type, id, source) {
        const modal = document.getElementById('modal');
        const body = document.getElementById('modal-body');
        let content = '';
        
        if(type === 'cmd') {
            const cmd = Array.from(data.commands.values()).find(c => c.name === id && c.source === source);
            const versionText = cmd.versionRange.min ? 
                `${cmd.versionRange.min}${cmd.versionRange.max === '+' ? '+' : '~' + cmd.versionRange.max}` : '';
            content = `
                <h2 style="font-family: VT323, monospace; font-size: 2.5rem; color: var(--mc-green); margin-bottom: 24px;">${cmd.name}</h2>
                <div style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <span style="background: rgba(93,140,58,0.2); color: var(--mc-light-green); padding: 6px 12px; border-radius: 8px; font-size: 0.9rem;">${versionMap[cmd.source] || cmd.source}</span>
                    ${versionText ? `<span style="background: rgba(251,191,36,0.2); color: var(--mc-gold); padding: 6px 12px; border-radius: 8px; font-size: 0.9rem;"><i class="fas fa-code-branch"></i> ${versionText}</span>` : ''}
                </div>
                <div style="margin-bottom: 20px;">
                    <div style="color: #64748b; font-size: 0.9rem; margin-bottom: 8px;">ç®€ä»‹</div>
                    <div style="line-height: 1.6;">${cmd.desc || 'æš‚æ— '}</div>
                </div>
                <div style="margin-bottom: 20px;">
                    <div style="color: #64748b; font-size: 0.9rem; margin-bottom: 8px;">è¯­æ³•</div>
                    <div style="background: rgba(0,0,0,0.4); padding: 16px; border-radius: 10px; font-family: JetBrains Mono, monospace; color: var(--mc-gold); border: 1px solid rgba(251,191,36,0.2);">${cmd.syntax}</div>
                </div>
                ${cmd.examples.length ? `
                    <div>
                        <div style="color: #64748b; font-size: 0.9rem; margin-bottom: 8px;">ç¤ºä¾‹</div>
                        ${cmd.examples.map(e => `<div style="background: rgba(93,140,58,0.1); padding: 12px; border-radius: 8px; margin-bottom: 8px; font-family: JetBrains Mono, monospace; cursor: pointer;" onclick="copyText('${e}')">${e}</div>`).join('')}
                    </div>
                ` : ''}
            `;
        } else if(type === 'adv') {
            const adv = data.advancements.find(a => a.id === id);
            let catClass = 'cat-main';
            if(adv.category.includes('ä¸‹ç•Œ')) catClass = 'cat-nether';
            else if(adv.category.includes('æœ«åœ°')) catClass = 'cat-end';
            else if(adv.category.includes('å†’é™©')) catClass = 'cat-adventure';
            else if(adv.category.includes('å†œç‰§')) catClass = 'cat-husbandry';
            
            content = `
                <h2 style="font-family: VT323, monospace; font-size: 2.5rem; color: var(--mc-cyan); margin-bottom: 16px;">${adv.name}</h2>
                <div style="margin-bottom: 16px;">
                    <span class="category-tag ${catClass}">${adv.category || 'å‡†åˆ™'}</span>
                </div>
                <div style="background: rgba(0,0,0,0.4); padding: 16px; border-radius: 10px; font-family: JetBrains Mono, monospace; color: var(--mc-cyan); margin-bottom: 24px; cursor: pointer;" onclick="copyText('${adv.id}')">${adv.id}</div>
                <div style="margin-bottom: 16px;"><span style="color: #64748b;">ç®€ä»‹:</span> ${adv.desc || 'æš‚æ— '}</div>
                ${adv.condition ? `<div style="margin-bottom: 16px;"><span style="color: #64748b;">æ¡ä»¶:</span> ${adv.condition}</div>` : ''}
            `;
        } else if(type === 'redstone') {
            const rs = data.redstone.find(r => r.name === id);
            content = `
                <h2 style="font-family: VT323, monospace; font-size: 2.5rem; color: var(--mc-red); margin-bottom: 16px;">${rs.name}</h2>
                ${rs.type ? `<div style="margin-bottom: 16px;"><span class="tag tag-red">${rs.type}</span></div>` : ''}
                <div style="margin-bottom: 16px;"><span style="color: #64748b;">åŠŸèƒ½:</span> ${rs.desc || 'æš‚æ— '}</div>
                ${rs.features.length ? `
                    <div style="margin-bottom: 16px;">
                        <div style="color: #64748b; margin-bottom: 8px;">ç‰¹æ€§:</div>
                        ${rs.features.map(f => `<div style="padding: 8px; background: rgba(220,38,38,0.1); border-radius: 6px; margin-bottom: 6px;">${f}</div>`).join('')}
                    </div>
                ` : ''}
            `;
        }
        
        body.innerHTML = content;
        modal.style.display = 'block';
    }
    
    function closeModal(e) {
        if(!e || e.target.id === 'modal') {
            document.getElementById('modal').style.display = 'none';
        }
    }
    
    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => showToast('âœ“ å·²å¤åˆ¶'));
    }
    
    function showToast(msg) {
        const toast = document.getElementById('toast');
        toast.textContent = msg;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 2500);
    }
    
    function updateStats() {
        document.getElementById('badge-cmd').textContent = data.commands.size;
        document.getElementById('badge-block').textContent = data.blocks.length;
        document.getElementById('badge-redstone').textContent = data.redstone.length;
        document.getElementById('badge-item').textContent = data.items.length;
        document.getElementById('badge-adv').textContent = data.advancements.length;
        
        const total = data.commands.size + data.blocks.length + data.redstone.length + data.items.length + data.advancements.length;
        document.getElementById('stat-total').textContent = total;
        document.getElementById('stat-cmd').textContent = data.commands.size;
    }
    
    // æ‹–æ‹½ä¸Šä¼ 
    const dropZone = document.getElementById('dropZone');
    dropZone.ondragover = (e) => { e.preventDefault(); dropZone.style.borderColor = 'var(--mc-green)'; };
    dropZone.ondragleave = () => { dropZone.style.borderColor = 'rgba(93,140,58,0.3)'; };
    dropZone.ondrop = (e) => {
        e.preventDefault();
        document.getElementById('fileInput').files = e.dataTransfer.files;
        document.getElementById('fileInput').dispatchEvent(new Event('change'));
    };
    </script>
</body>
</html>