<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCæŒ‡ä»¤è¾…åŠ© - é«˜çº§ä¸»é¢˜å¡å¯†ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --mc-green: #5D8C3A;
            --mc-dark-green: #3D6E2E;
            --mc-light-green: #7EB356;
            --mc-gold: #fbbf24;
        }
        
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #0a0f1c 0%, #1a1f2e 50%, #0a0f1c 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #e2e8f0;
        }
        
        .pixel-font { font-family: 'VT323', monospace; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }
        
        .glass-card {
            background: rgba(20, 25, 40, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(93, 140, 58, 0.3);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--mc-green), var(--mc-dark-green));
            border: none;
            color: white;
            padding: 14px 32px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(93, 140, 58, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #e2e8f0;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .key-display {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(20, 25, 40, 0.8));
            border: 2px solid var(--mc-green);
            border-radius: 12px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            letter-spacing: 4px;
            color: var(--mc-gold);
            text-align: center;
            word-break: break-all;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .key-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .history-item {
            background: rgba(30, 41, 59, 0.6);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(93, 140, 58, 0.1);
        }
        
        .particle {
            position: fixed;
            width: 4px;
            height: 4px;
            background: var(--mc-green);
            pointer-events: none;
            opacity: 0.6;
            animation: float-up linear infinite;
        }
        
        @keyframes float-up {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-unused {
            background: rgba(93, 140, 58, 0.2);
            color: var(--mc-light-green);
        }
        
        .status-used {
            background: rgba(220, 38, 38, 0.2);
            color: #fca5a5;
        }
        
        .copy-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(93, 140, 58, 0.95);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 1000;
        }
        
        .copy-hint.show {
            opacity: 1;
        }
        
        input[type="number"] {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(93, 140, 58, 0.3);
            border-radius: 8px;
            padding: 10px 14px;
            color: #e2e8f0;
            font-size: 1rem;
            width: 80px;
            text-align: center;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: var(--mc-green);
        }
    </style>
</head>
<body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div id="particles"></div>
    
    <div class="glass-card" style="width: 90%; max-width: 600px; padding: 40px;">
        <!-- æ ‡é¢˜ -->
        <div style="text-align: center; margin-bottom: 30px;">
            <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ’¾</div>
            <h1 class="pixel-font" style="font-size: 2.5rem; color: var(--mc-gold); margin: 0; text-shadow: 0 0 30px rgba(251, 191, 36, 0.5);">
                å¡å¯†ç”Ÿæˆå™¨
            </h1>
            <p style="color: #94a3b8; margin-top: 8px; font-size: 0.95rem;">
                ç”Ÿæˆ16ä½éšæœºå¡å¯†ï¼Œè§£é”é«˜çº§ä¸»é¢˜
            </p>
        </div>
        
        <!-- ç”Ÿæˆè®¾ç½® -->
        <div style="background: rgba(30, 41, 59, 0.4); border-radius: 12px; padding: 20px; margin-bottom: 24px;">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 15px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="color: #94a3b8;">ç”Ÿæˆæ•°é‡:</span>
                    <input type="number" id="genCount" value="1" min="1" max="10">
                    <span style="color: #64748b; font-size: 0.85rem;">å¼  (1-10)</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="color: #94a3b8;">æœ‰æ•ˆæœŸ:</span>
                    <select id="expiryDays" style="background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(93, 140, 58, 0.3); border-radius: 8px; padding: 10px 14px; color: #e2e8f0; font-size: 0.9rem;">
                        <option value="7">7å¤©</option>
                        <option value="30" selected>30å¤©</option>
                        <option value="90">90å¤©</option>
                        <option value="365">1å¹´</option>
                        <option value="0">æ°¸ä¹…</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- å¡å¯†æ˜¾ç¤ºåŒºåŸŸ -->
        <div id="keyDisplayArea" style="margin-bottom: 24px; display: none;">
            <div class="key-display" id="generatedKey">
                XXXX-XXXX-XXXX-XXXX
            </div>
            <div style="display: flex; gap: 10px; margin-top: 12px; justify-content: center;">
                <button class="btn-secondary" onclick="copyKey()">
                    <i class="fas fa-copy"></i> å¤åˆ¶
                </button>
                <button class="btn-secondary" onclick="downloadKeys()">
                    <i class="fas fa-download"></i> å¯¼å‡º
                </button>
            </div>
        </div>
        
        <!-- ç”ŸæˆæŒ‰é’® -->
        <button class="btn-primary" onclick="generateKeys()" style="width: 100%; justify-content: center; margin-bottom: 24px;">
            <i class="fas fa-magic"></i>
            ç”Ÿæˆå¡å¯†
        </button>
        
        <!-- å†å²è®°å½• -->
        <div style="border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h3 style="margin: 0; color: #e2e8f0; font-size: 1rem;">
                    <i class="fas fa-history" style="color: var(--mc-green); margin-right: 8px;"></i>
                    ç”Ÿæˆè®°å½•
                </h3>
                <button class="btn-secondary" onclick="clearHistory()" style="font-size: 0.8rem; padding: 6px 12px;">
                    <i class="fas fa-trash"></i> æ¸…ç©º
                </button>
            </div>
            <div id="historyList" style="max-height: 200px; overflow-y: auto;">
                <div style="text-align: center; color: #64748b; padding: 20px; font-size: 0.9rem;">
                    æš‚æ— ç”Ÿæˆè®°å½•
                </div>
            </div>
        </div>
        
        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div style="background: rgba(93, 140, 58, 0.1); border-radius: 10px; padding: 16px; margin-top: 24px; display: flex; justify-content: space-around; text-align: center;">
            <div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--mc-gold);" id="totalCount">0</div>
                <div style="font-size: 0.8rem; color: #94a3b8;">æ€»ç”Ÿæˆ</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--mc-light-green);" id="unusedCount">0</div>
                <div style="font-size: 0.8rem; color: #94a3b8;">æœªä½¿ç”¨</div>
            </div>
            <div>
                <div style="font-size: 1.5rem; font-weight: 700; color: #fca5a5;" id="usedCount">0</div>
                <div style="font-size: 0.8rem; color: #94a3b8;">å·²ä½¿ç”¨</div>
            </div>
        </div>
    </div>
    
    <!-- å¤åˆ¶æç¤º -->
    <div class="copy-hint" id="copyHint">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿!</div>
    
    <!-- å¯¼å‡ºæ•°æ®éšè—åŒºåŸŸ -->
    <a id="downloadLink" style="display: none;"></a>
    
    <!-- å¼•å…¥å­—ä½“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script>
        // å¡å¯†å­˜å‚¨ç®¡ç†
        const KEY_STORAGE = 'mc_theme_keys_v1';
        
        // ç”Ÿæˆ16ä½éšæœºå¡å¯†
        function generateKey() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let key = '';
            for(let i = 0; i < 16; i++) {
                key += chars.charAt(Math.floor(Math.random() * chars.length));
                if((i + 1) % 4 === 0 && i < 15) {
                    key += '-';
                }
            }
            return key;
        }
        
        // è·å–å­˜å‚¨çš„å¡å¯†
        function getStoredKeys() {
            try {
                const data = localStorage.getItem(KEY_STORAGE);
                return data ? JSON.parse(data) : [];
            } catch(e) {
                return [];
            }
        }
        
        // ä¿å­˜å¡å¯†
        function saveKeys(keys) {
            localStorage.setItem(KEY_STORAGE, JSON.stringify(keys));
        }
        
        // ç”Ÿæˆå¡å¯†
        function generateKeys() {
            const count = parseInt(document.getElementById('genCount').value) || 1;
            const expiryDays = parseInt(document.getElementById('expiryDays').value);
            const keys = getStoredKeys();
            const newKeys = [];
            
            for(let i = 0; i < count; i++) {
                const key = generateKey();
                const expiryDate = expiryDays > 0 
                    ? new Date(Date.now() + expiryDays * 24 * 60 * 60 * 1000).toISOString()
                    : null;
                
                const keyData = {
                    key: key,
                    created: new Date().toISOString(),
                    expiry: expiryDate,
                    used: false,
                    usedDate: null
                };
                
                keys.push(keyData);
                newKeys.push(keyData);
            }
            
            saveKeys(keys);
            
            // æ˜¾ç¤ºç”Ÿæˆçš„å¡å¯†
            const displayArea = document.getElementById('keyDisplayArea');
            const keyDisplay = document.getElementById('generatedKey');
            
            if(count === 1) {
                keyDisplay.textContent = newKeys[0].key;
                keyDisplay.style.fontSize = '1.5rem';
            } else {
                keyDisplay.innerHTML = newKeys.map(k => `<div style="margin: 8px 0;">${k.key}</div>`).join('');
                keyDisplay.style.fontSize = '1rem';
            }
            
            displayArea.style.display = 'block';
            
            updateHistory();
            updateStats();
            
            // æ»šåŠ¨åˆ°æ˜¾ç¤ºåŒºåŸŸ
            displayArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // å¤åˆ¶å¡å¯†
        function copyKey() {
            const keyDisplay = document.getElementById('generatedKey');
            const text = keyDisplay.innerText;
            
            navigator.clipboard.writeText(text).then(() => {
                showCopyHint();
            }).catch(() => {
                // é™çº§æ–¹æ¡ˆ
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showCopyHint();
            });
        }
        
        function showCopyHint() {
            const hint = document.getElementById('copyHint');
            hint.classList.add('show');
            setTimeout(() => hint.classList.remove('show'), 2000);
        }
        
        // å¯¼å‡ºå¡å¯†
        function downloadKeys() {
            const keys = getStoredKeys();
            if(keys.length === 0) {
                alert('æš‚æ— å¡å¯†å¯å¯¼å‡º');
                return;
            }
            
            let content = 'MCæŒ‡ä»¤è¾…åŠ© - é«˜çº§ä¸»é¢˜å¡å¯†åˆ—è¡¨\n';
            content += 'ç”Ÿæˆæ—¶é—´: ' + new Date().toLocaleString() + '\n';
            content += '=' .repeat(50) + '\n\n';
            
            keys.forEach((k, i) => {
                content += `[${i + 1}] ${k.key}\n`;
                content += `    çŠ¶æ€: ${k.used ? 'å·²ä½¿ç”¨' : 'æœªä½¿ç”¨'}\n`;
                content += `    ç”Ÿæˆ: ${new Date(k.created).toLocaleString()}\n`;
                if(k.expiry) {
                    content += `    è¿‡æœŸ: ${new Date(k.expiry).toLocaleString()}\n`;
                } else {
                    content += `    è¿‡æœŸ: æ°¸ä¹…\n`;
                }
                if(k.used && k.usedDate) {
                    content += `    ä½¿ç”¨: ${new Date(k.usedDate).toLocaleString()}\n`;
                }
                content += '\n';
            });
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const link = document.getElementById('downloadLink');
            link.href = URL.createObjectURL(blob);
            link.download = `MCå¡å¯†_${new Date().toISOString().slice(0,10)}.txt`;
            link.click();
        }
        
        // æ›´æ–°å†å²è®°å½•
        function updateHistory() {
            const keys = getStoredKeys();
            const list = document.getElementById('historyList');
            
            if(keys.length === 0) {
                list.innerHTML = '<div style="text-align: center; color: #64748b; padding: 20px; font-size: 0.9rem;">æš‚æ— ç”Ÿæˆè®°å½•</div>';
                return;
            }
            
            // æ˜¾ç¤ºæœ€è¿‘5æ¡
            const recent = keys.slice(-5).reverse();
            list.innerHTML = recent.map(k => `
                <div class="history-item">
                    <div>
                        <div class="mono-font" style="color: var(--mc-gold); font-size: 0.95rem; margin-bottom: 4px;">${k.key}</div>
                        <div style="font-size: 0.75rem; color: #64748b;">
                            ${new Date(k.created).toLocaleString()}
                            ${k.expiry ? ' | è¿‡æœŸ: ' + new Date(k.expiry).toLocaleDateString() : ' | æ°¸ä¹…'}
                        </div>
                    </div>
                    <span class="status-badge ${k.used ? 'status-used' : 'status-unused'}">
                        ${k.used ? 'å·²ä½¿ç”¨' : 'æœªä½¿ç”¨'}
                    </span>
                </div>
            `).join('');
        }
        
        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            const keys = getStoredKeys();
            document.getElementById('totalCount').textContent = keys.length;
            document.getElementById('unusedCount').textContent = keys.filter(k => !k.used).length;
            document.getElementById('usedCount').textContent = keys.filter(k => k.used).length;
        }
        
        // æ¸…ç©ºå†å²
        function clearHistory() {
            if(confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å¡å¯†è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem(KEY_STORAGE);
                document.getElementById('keyDisplayArea').style.display = 'none';
                updateHistory();
                updateStats();
            }
        }
        
        // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
        function initParticles() {
            const container = document.getElementById('particles');
            for(let i = 0; i < 30; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.animationDuration = (Math.random() * 10 + 10) + 's';
                p.style.animationDelay = Math.random() * 10 + 's';
                container.appendChild(p);
            }
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initParticles();
            updateHistory();
            updateStats();
        });
    </script>
</body>
</html>
